<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>room - umweb-remote</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="umweb-remote" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/chat.html">chat</a></li>
                                <li><a href="../classes/chat_panel.html">chat_panel</a></li>
                                <li><a href="../classes/g_UserList.html">g_UserList</a></li>
                                <li><a href="../classes/message_display.html">message_display</a></li>
                                <li><a href="../classes/persist.html">persist</a></li>
                                <li><a href="../classes/room.html">room</a></li>
                                <li><a href="../classes/SendGift.html">SendGift</a></li>
                                <li><a href="../classes/User.html">User</a></li>
                                <li><a href="../classes/xchat_swf.html">xchat_swf</a></li>
                                <li><a href="../classes/xMessager.html">xMessager</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/chat.html">chat</a></li>
                                <li><a href="../modules/ng.html">ng</a></li>
                                <li><a href="../modules/room.html">room</a></li>
                                <li><a href="../modules/SendGift.html">SendGift</a></li>
                                <li><a href="../modules/xchat_swf.html">xchat_swf</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1>room Class</h1>
<div class="box meta">


        <div class="foundat">
            Defined in: <a href="../files/js_room_main.js.html#l1"><code>js\room_main.js:1</code></a>
        </div>

            Module: <a href="../modules/room.html">room</a>

</div>


<div class="box intro">
    <p>Room page module</p>

</div>


<div id="classdocs" class="tabview">
    <ul class="api-class-tabs">
        <li class="api-class-tab index"><a href="#index">Index</a></li>

            <li class="api-class-tab methods"><a href="#methods">Methods</a></li>
            <li class="api-class-tab properties"><a href="#properties">Properties</a></li>
    </ul>

    <div>
        <div id="index" class="api-class-tabpanel index">
            <h2 class="off-left">Item Index</h2>

                <div class="index-section methods">
                    <h3>Methods</h3>

                    <ul class="index-list methods">
                            <li class="index-item method">
                                <a href="#method_fill_fan">fill_fan</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_jquery.ready">jquery.ready</a>

                            </li>
                            <li class="index-item method deprecated">
                                <a href="#method_load_anchor_fans">load_anchor_fans</a>

                                    <span class="flag deprecated">deprecated</span>
                            </li>
                            <li class="index-item method">
                                <a href="#method_load_room_data">load_room_data</a>

                            </li>
                            <li class="index-item method deprecated">
                                <a href="#method_load_room_recommended">load_room_recommended</a>

                                    <span class="flag deprecated">deprecated</span>
                            </li>
                            <li class="index-item method">
                                <a href="#method_load_speak_data">load_speak_data</a>

                            </li>
                            <li class="index-item method">
                                <a href="#method_video_start">video_start</a>

                            </li>
                    </ul>
                </div>

                <div class="index-section properties">
                    <h3>Properties</h3>

                    <ul class="index-list properties">
                            <li class="index-item property">
                                <a href="#property_pendingRequests Array of config objects for currently pending!~YUIDOC_LINE~!  requests. This is primarily meant to be used for debugging purposes.">pendingRequests Array of config objects for currently pending!~YUIDOC_LINE~!  requests. This is primarily meant to be used for debugging purposes.</a>

                            </li>
                            <li class="index-item property">
                                <a href="#property_{boolean} $invalid True if at least one error on the control.">{boolean} $invalid True if at least one error on the control.</a>

                            </li>
                            <li class="index-item property">
                                <a href="#property_{boolean} animations Does the browser support CSS animation events ?">{boolean} animations Does the browser support CSS animation events ?</a>

                            </li>
                            <li class="index-item property">
                                <a href="#property_{Object} $error Is an object hash, containing references to all invalid controls or
 forms, where:

 - keys are validation tokens (error names),
 - values are arrays of controls or forms that are invalid for given error name.


 Built-in validation tokens:

 - &#x60;email&#x60;
 - &#x60;max&#x60;
 - &#x60;maxlength&#x60;
 - &#x60;min&#x60;
 - &#x60;minlength&#x60;
 - &#x60;number&#x60;
 - &#x60;pattern&#x60;
 - &#x60;required&#x60;
 - &#x60;url&#x60;">{Object} $error Is an object hash, containing references to all invalid controls or
 forms, where:

 - keys are validation tokens (error names),
 - values are arrays of controls or forms that are invalid for given error name.


 Built-in validation tokens:

 - &#x60;email&#x60;
 - &#x60;max&#x60;
 - &#x60;maxlength&#x60;
 - &#x60;min&#x60;
 - &#x60;minlength&#x60;
 - &#x60;number&#x60;
 - &#x60;pattern&#x60;
 - &#x60;required&#x60;
 - &#x60;url&#x60;</a>

                            </li>
                    </ul>
                </div>


        </div>

            <div id="methods" class="api-class-tabpanel">
                <h2 class="off-left">Methods</h2>

<div id="method_fill_fan" class="method item">
    <h3 class="name"><code>fill_fan</code></h3>

        <span class="paren">()</span>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l174"><code>js\room_main.js:174</code></a>
        </p>



    </div>

    <div class="description">
        <p>Description: common method to construct list of today and total</p>

    </div>




</div>
<div id="method_jquery.ready" class="method item">
    <h3 class="name"><code>jquery.ready</code></h3>

        <span class="paren">()</span>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l8"><code>js\room_main.js:8</code></a>
        </p>



    </div>

    <div class="description">
        <p>Description: program entry</p>

    </div>




</div>
<div id="method_load_anchor_fans" class="method item deprecated">
    <h3 class="name"><code>load_anchor_fans</code></h3>

        <span class="paren">()</span>


        <span class="flag deprecated" title="Use load_room_data">deprecated</span>






    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l291"><code>js\room_main.js:291</code></a>
        </p>


            <p>Deprecated: Use load_room_data</p>

            <p>Available since next version</p>
    </div>

    <div class="description">
        <p>Description: load and render fans num on left-top about anchor info</p>

    </div>




</div>
<div id="method_load_room_data" class="method item">
    <h3 class="name"><code>load_room_data</code></h3>

        <span class="paren">()</span>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l208"><code>js\room_main.js:208</code></a>
        </p>



    </div>

    <div class="description">
        <p>Description: load data for left and right columns</p>

    </div>




</div>
<div id="method_load_room_recommended" class="method item deprecated">
    <h3 class="name"><code>load_room_recommended</code></h3>

        <span class="paren">()</span>


        <span class="flag deprecated" title="Use message_display.load_room_recommended">deprecated</span>






    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l332"><code>js\room_main.js:332</code></a>
        </p>


            <p>Deprecated: Use message_display.load_room_recommended</p>

    </div>

    <div class="description">
        <p>Loading recommended rooms if broadcast not starts, to refactor</p>

    </div>




</div>
<div id="method_load_speak_data" class="method item">
    <h3 class="name"><code>load_speak_data</code></h3>

        <span class="paren">()</span>








    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l149"><code>js\room_main.js:149</code></a>
        </p>



    </div>

    <div class="description">
        <p>Description: load speak data for scroll in the bottom</p>

    </div>




</div>
<div id="method_video_start" class="method item">
    <h3 class="name"><code>video_start</code></h3>

        <div class="args">
            <span class="paren">(</span><ul class="args-list inline commas">
                <li class="arg">
                        <code>userpara.roomer</code>
                </li>
                <li class="arg">
                        <code>swfParam</code>
                </li>
            </ul><span class="paren">)</span>
        </div>

        <span class="returns-inline">
            <span class="type">Undefined</span>
        </span>







    <div class="meta">
                <p>
                Defined in
        <a href="../files/js_room_main.js.html#l41"><code>js\room_main.js:41</code></a>
        </p>



    </div>

    <div class="description">
        <p>Ini video, Requiring attributes from server</p>

    </div>

        <div class="params">
            <h4>Parameters:</h4>

            <ul class="params-list">
                <li class="param">
                        <code class="param-name">userpara.roomer</code>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>


                    <div class="param-description">
                        <p>example
    0</p>

                    </div>

                </li>
                <li class="param">
                        <code class="param-name">swfParam</code>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>


                    <div class="param-description">
                         
                    </div>

                        <ul class="params-list">
                            <li class="param">
                                    <code class="param-name">room_id</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>

                                <div class="param-description">
                                    <p>example
    201855</p>

                                </div>

                            </li>
                            <li class="param">
                                    <code class="param-name">bps</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>

                                <div class="param-description">
                                    <p>example
    150000</p>

                                </div>

                            </li>
                            <li class="param">
                                    <code class="param-name">uid</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>

                                <div class="param-description">
                                    <p>example
    150830239</p>

                                </div>

                            </li>
                            <li class="param">
                                    <code class="param-name">levelinroom</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number" class="crosslink external" target="_blank">Number</a></span>

                                <div class="param-description">
                                    <p>example
    1</p>

                                </div>

                            </li>
                            <li class="param">
                                    <code class="param-name">nickname_b64</code>
                                    <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></span>

                                <div class="param-description">
                                    <p>example
    &quot;5ri45a6iMDIzOQ==&quot;</p>

                                </div>

                            </li>
                        </ul>
                </li>
            </ul>
        </div>

        <div class="returns">
            <h4>Returns:</h4>

            <div class="returns-description">
                        <span class="type">Undefined</span>:
            </div>
        </div>


        <div class="example">
            <h4>Example:</h4>

            <div class="example-content">
                <pre class="code prettyprint"><code>{&quot;server&quot;:&quot;112.124.12.112:19350&quot;,&quot;room_id&quot;:201849,&quot;uid&quot;:0,&quot;level&quot;:1,&quot;token&quot;:&quot;video_token&quot;,&quot;nickname&quot;:&quot;游客&quot;,&quot;splash&quot;:[&quot;/room/images/splash.png&quot;,&quot;/room/images/mic_free.png&quot;,&quot;/room/images/mic_chairman.png&quot;],&quot;bps&quot;:500,&quot;vq&quot;:90}
</code></pre>
            </div>
        </div>
</div>
            </div>

            <div id="properties" class="api-class-tabpanel">
                <h2 class="off-left">Properties</h2>

                    <div id="property_pendingRequests Array of config objects for currently pending!~YUIDOC_LINE~!  requests. This is primarily meant to be used for debugging purposes." class="property item">
                        <h3 class="name"><code>pendingRequests Array of config objects for currently pending!~YUIDOC_LINE~!  requests. This is primarily meant to be used for debugging purposes.</code></h3>
                        <span class="type">Array.<Object></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                        <p>Provided by the <a href="../modules/ng.html">ng</a> module.</p>
                                    <p>
                                    Defined in
                            <a href="../files/js_angular.js.html#l7473"><code>js\angular.js:7473</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>The <code>$http</code> service is a core Angular service that facilitates communication with the remote
                    HTTP servers via the browser&#39;s <a href="https://developer.mozilla.org/en/xmlhttprequest">XMLHttpRequest</a>
                    object or via <a href="http://en.wikipedia.org/wiki/JSONP">JSONP</a>.</p>
                    <p>For unit testing applications that use <code>$http</code> service, see
                    {@link ngMock.$httpBackend $httpBackend mock}.</p>
                    <p>For a higher level of abstraction, please check out the {@link ngResource.$resource
                    $resource} service.</p>
                    <p>The $http API is based on the {@link ng.$q deferred/promise APIs} exposed by
                    the $q service. While for simple usage patterns this doesn&#39;t matter much, for advanced usage
                    it is important to familiarize yourself with these APIs and the guarantees they provide.</p>
                    <h1 id="general-usage">General usage</h1>
                    <p>The <code>$http</code> service is a function which takes a single argument — a configuration object —
                    that is used to generate an HTTP request and returns  a {@link ng.$q promise}
                    with two $http specific methods: <code>success</code> and <code>error</code>.</p>
                    <pre class="code prettyprint"><code class="lang-js">  $http({method: &#39;GET&#39;, url: &#39;/someUrl&#39;}).
                        success(function(data, status, headers, config) {
                          // this callback will be called asynchronously
                          // when the response is available
                        }).
                        error(function(data, status, headers, config) {
                          // called asynchronously if an error occurs
                          // or server returns response with an error status.
                        });
                    </code></pre>
                    <p>Since the returned value of calling the $http function is a <code>promise</code>, you can also use
                    the <code>then</code> method to register callbacks, and these callbacks will receive a single argument –
                    an object representing the response. See the API signature and type info below for more
                    details.</p>
                    <p>A response status code between 200 and 299 is considered a success status and
                    will result in the success callback being called. Note that if the response is a redirect,
                    XMLHttpRequest will transparently follow it, meaning that the error callback will not be
                    called for such responses.</p>
                    <h1 id="writing-unit-tests-that-use-http">Writing Unit Tests that use $http</h1>
                    <p>When unit testing (using {@link ngMock ngMock}), it is necessary to call
                    {@link ngMock.$httpBackend#flush $httpBackend.flush()} to flush each pending
                    request using trained responses.</p>
                    <pre class="code prettyprint"><code>$httpBackend.expectGET(...);
                    $http.get(...);
                    $httpBackend.flush();
                    </code></pre><h1 id="shortcut-methods">Shortcut methods</h1>
                    <p>Shortcut methods are also available. All shortcut methods require passing in the URL, and
                    request data must be passed in for POST/PUT requests.</p>
                    <pre class="code prettyprint"><code class="lang-js">  $http.get(&#39;/someUrl&#39;).success(successCallback);
                      $http.post(&#39;/someUrl&#39;, data).success(successCallback);
                    </code></pre>
                    <p>Complete list of shortcut methods:</p>
                    <ul>
                    <li>{@link ng.$http#get $http.get}</li>
                    <li>{@link ng.$http#head $http.head}</li>
                    <li>{@link ng.$http#post $http.post}</li>
                    <li>{@link ng.$http#put $http.put}</li>
                    <li>{@link ng.$http#delete $http.delete}</li>
                    <li>{@link ng.$http#jsonp $http.jsonp}</li>
                    </ul>
                    <h1 id="setting-http-headers">Setting HTTP Headers</h1>
                    <p>The $http service will automatically add certain HTTP headers to all requests. These defaults
                    can be fully configured by accessing the <code>$httpProvider.defaults.headers</code> configuration
                    object, which currently contains this default configuration:</p>
                    <ul>
                    <li><code>$httpProvider.defaults.headers.common</code> (headers that are common for all requests):<ul>
                    <li><code>Accept: application/json, text/plain, * / *</code></li>
                    </ul>
                    </li>
                    <li><code>$httpProvider.defaults.headers.post</code>: (header defaults for POST requests)<ul>
                    <li><code>Content-Type: application/json</code></li>
                    </ul>
                    </li>
                    <li><code>$httpProvider.defaults.headers.put</code> (header defaults for PUT requests)<ul>
                    <li><code>Content-Type: application/json</code></li>
                    </ul>
                    </li>
                    </ul>
                    <p>To add or overwrite these defaults, simply add or remove a property from these configuration
                    objects. To add headers for an HTTP method other than POST or PUT, simply add a new object
                    with the lowercased HTTP method name as the key, e.g.
                    `$httpProvider.defaults.headers.get = { &#39;My-Header&#39; : &#39;value&#39; }.</p>
                    <p>The defaults can also be set at runtime via the <code>$http.defaults</code> object in the same
                    fashion. For example:</p>
                    <pre class="code prettyprint"><code>module.run(function($http) {
                      $http.defaults.headers.common.Authorization = &#39;Basic YmVlcDpib29w&#39;
                    });
                    </code></pre><p>In addition, you can supply a <code>headers</code> property in the config object passed when
                    calling <code>$http(config)</code>, which overrides the defaults without changing them globally.</p>
                    <h1 id="transforming-requests-and-responses">Transforming Requests and Responses</h1>
                    <p>Both requests and responses can be transformed using transform functions. By default, Angular
                    applies these transformations:</p>
                    <p>Request transformations:</p>
                    <ul>
                    <li>If the <code>data</code> property of the request configuration object contains an object, serialize it
                    into JSON format.</li>
                    </ul>
                    <p>Response transformations:</p>
                    <ul>
                    <li>If XSRF prefix is detected, strip it (see Security Considerations section below).</li>
                    <li>If JSON response is detected, deserialize it using a JSON parser.</li>
                    </ul>
                    <p>To globally augment or override the default transforms, modify the
                    <code>$httpProvider.defaults.transformRequest</code> and <code>$httpProvider.defaults.transformResponse</code>
                    properties. These properties are by default an array of transform functions, which allows you
                    to <code>push</code> or <code>unshift</code> a new transformation function into the transformation chain. You can
                    also decide to completely override any default transformations by assigning your
                    transformation functions to these properties directly without the array wrapper.  These defaults
                    are again available on the $http factory at run-time, which may be useful if you have run-time
                    services you wish to be involved in your transformations.</p>
                    <p>Similarly, to locally override the request/response transforms, augment the
                    <code>transformRequest</code> and/or <code>transformResponse</code> properties of the configuration object passed
                    into <code>$http</code>.</p>
                    <h1 id="caching">Caching</h1>
                    <p>To enable caching, set the request configuration <code>cache</code> property to <code>true</code> (to use default
                    cache) or to a custom cache object (built with {@link ng.$cacheFactory <code>$cacheFactory</code>}).
                    When the cache is enabled, <code>$http</code> stores the response from the server in the specified
                    cache. The next time the same request is made, the response is served from the cache without
                    sending a request to the server.</p>
                    <p>Note that even if the response is served from cache, delivery of the data is asynchronous in
                    the same way that real requests are.</p>
                    <p>If there are multiple GET requests for the same URL that should be cached using the same
                    cache, but the cache is not populated yet, only one request to the server will be made and
                    the remaining requests will be fulfilled using the response from the first request.</p>
                    <p>You can change the default cache to a new object (built with
                    {@link ng.$cacheFactory <code>$cacheFactory</code>}) by updating the
                    {@link ng.$http#properties_defaults <code>$http.defaults.cache</code>} property. All requests who set
                    their <code>cache</code> property to <code>true</code> will now use this cache object.</p>
                    <p>If you set the default cache to <code>false</code> then only requests that specify their own custom
                    cache object will be cached.</p>
                    <h1 id="interceptors">Interceptors</h1>
                    <p>Before you start creating interceptors, be sure to understand the
                    {@link ng.$q $q and deferred/promise APIs}.</p>
                    <p>For purposes of global error handling, authentication, or any kind of synchronous or
                    asynchronous pre-processing of request or postprocessing of responses, it is desirable to be
                    able to intercept requests before they are handed to the server and
                    responses before they are handed over to the application code that
                    initiated these requests. The interceptors leverage the {@link ng.$q
                    promise APIs} to fulfill this need for both synchronous and asynchronous pre-processing.</p>
                    <p>The interceptors are service factories that are registered with the <code>$httpProvider</code> by
                    adding them to the <code>$httpProvider.interceptors</code> array. The factory is called and
                    injected with dependencies (if specified) and returns the interceptor.</p>
                    <p>There are two kinds of interceptors (and two kinds of rejection interceptors):</p>
                    <ul>
                    <li><code>request</code>: interceptors get called with a http <code>config</code> object. The function is free to
                    modify the <code>config</code> object or create a new one. The function needs to return the <code>config</code>
                    object directly, or a promise containing the <code>config</code> or a new <code>config</code> object.</li>
                    <li><code>requestError</code>: interceptor gets called when a previous interceptor threw an error or
                    resolved with a rejection.</li>
                    <li><code>response</code>: interceptors get called with http <code>response</code> object. The function is free to
                    modify the <code>response</code> object or create a new one. The function needs to return the <code>response</code>
                    object directly, or as a promise containing the <code>response</code> or a new <code>response</code> object.</li>
                    <li><code>responseError</code>: interceptor gets called when a previous interceptor threw an error or
                    resolved with a rejection.</li>
                    </ul>
                    <pre class="code prettyprint"><code class="lang-js">  // register the interceptor as a service
                      $provide.factory(&#39;myHttpInterceptor&#39;, function($q, dependency1, dependency2) {
                        return {
                          // optional method
                          &#39;request&#39;: function(config) {
                            // do something on success
                            return config;
                          },
                    
                          // optional method
                         &#39;requestError&#39;: function(rejection) {
                            // do something on error
                            if (canRecover(rejection)) {
                              return responseOrNewPromise
                            }
                            return $q.reject(rejection);
                          },
                    
                    
                    
                          // optional method
                          &#39;response&#39;: function(response) {
                            // do something on success
                            return response;
                          },
                    
                          // optional method
                         &#39;responseError&#39;: function(rejection) {
                            // do something on error
                            if (canRecover(rejection)) {
                              return responseOrNewPromise
                            }
                            return $q.reject(rejection);
                          }
                        };
                      });
                    
                      $httpProvider.interceptors.push(&#39;myHttpInterceptor&#39;);
                    
                    
                      // alternatively, register the interceptor via an anonymous factory
                      $httpProvider.interceptors.push(function($q, dependency1, dependency2) {
                        return {
                         &#39;request&#39;: function(config) {
                             // same as above
                          },
                    
                          &#39;response&#39;: function(response) {
                             // same as above
                          }
                        };
                      });
                    </code></pre>
                    <h1 id="response-interceptors-deprecated-">Response interceptors (DEPRECATED)</h1>
                    <p>Before you start creating interceptors, be sure to understand the
                    {@link ng.$q $q and deferred/promise APIs}.</p>
                    <p>For purposes of global error handling, authentication or any kind of synchronous or
                    asynchronous preprocessing of received responses, it is desirable to be able to intercept
                    responses for http requests before they are handed over to the application code that
                    initiated these requests. The response interceptors leverage the {@link ng.$q
                    promise apis} to fulfil this need for both synchronous and asynchronous preprocessing.</p>
                    <p>The interceptors are service factories that are registered with the $httpProvider by
                    adding them to the <code>$httpProvider.responseInterceptors</code> array. The factory is called and
                    injected with dependencies (if specified) and returns the interceptor  — a function that
                    takes a {@link ng.$q promise} and returns the original or a new promise.</p>
                    <pre class="code prettyprint"><code class="lang-js">  // register the interceptor as a service
                      $provide.factory(&#39;myHttpInterceptor&#39;, function($q, dependency1, dependency2) {
                        return function(promise) {
                          return promise.then(function(response) {
                            // do something on success
                            return response;
                          }, function(response) {
                            // do something on error
                            if (canRecover(response)) {
                              return responseOrNewPromise
                            }
                            return $q.reject(response);
                          });
                        }
                      });
                    
                      $httpProvider.responseInterceptors.push(&#39;myHttpInterceptor&#39;);
                    
                    
                      // register the interceptor via an anonymous factory
                      $httpProvider.responseInterceptors.push(function($q, dependency1, dependency2) {
                        return function(promise) {
                          // same as above
                        }
                      });
                    </code></pre>
                    <h1 id="security-considerations">Security Considerations</h1>
                    <p>When designing web applications, consider security threats from:</p>
                    <ul>
                    <li><a href="http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx">JSON vulnerability</a></li>
                    <li><a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a></li>
                    </ul>
                    <p>Both server and the client must cooperate in order to eliminate these threats. Angular comes
                    pre-configured with strategies that address these issues, but for this to work backend server
                    cooperation is required.</p>
                    <h2 id="json-vulnerability-protection">JSON Vulnerability Protection</h2>
                    <p>A <a href="http://haacked.com/archive/2008/11/20/anatomy-of-a-subtle-json-vulnerability.aspx">JSON vulnerability</a>
                    allows third party website to turn your JSON resource URL into
                    <a href="http://en.wikipedia.org/wiki/JSONP">JSONP</a> request under some conditions. To
                    counter this your server can prefix all JSON requests with following string <code>&quot;)]}&#39;,\n&quot;</code>.
                    Angular will automatically strip the prefix before processing it as JSON.</p>
                    <p>For example if your server needs to return:</p>
                    <pre class="code prettyprint"><code class="lang-js">[&#39;one&#39;,&#39;two&#39;]
                    </code></pre>
                    <p>which is vulnerable to attack, your server can return:</p>
                    <pre class="code prettyprint"><code class="lang-js">)]}&#39;,
                    [&#39;one&#39;,&#39;two&#39;]
                    </code></pre>
                    <p>Angular will strip the prefix, before processing the JSON.</p>
                    <h2 id="cross-site-request-forgery-xsrf-protection">Cross Site Request Forgery (XSRF) Protection</h2>
                    <p><a href="http://en.wikipedia.org/wiki/Cross-site_request_forgery">XSRF</a> is a technique by which
                    an unauthorized site can gain your user&#39;s private data. Angular provides a mechanism
                    to counter XSRF. When performing XHR requests, the $http service reads a token from a cookie
                    (by default, <code>XSRF-TOKEN</code>) and sets it as an HTTP header (<code>X-XSRF-TOKEN</code>). Since only
                    JavaScript that runs on your domain could read the cookie, your server can be assured that
                    the XHR came from JavaScript running on your domain. The header will not be set for
                    cross-domain requests.</p>
                    <p>To take advantage of this, your server needs to set a token in a JavaScript readable session
                    cookie called <code>XSRF-TOKEN</code> on the first HTTP GET request. On subsequent XHR requests the
                    server can verify that the cookie matches <code>X-XSRF-TOKEN</code> HTTP header, and therefore be sure
                    that only JavaScript running on your domain could have sent the request. The token must be
                    unique for each user and must be verifiable by the server (to prevent the JavaScript from
                    making up its own tokens). We recommend that the token is a digest of your site&#39;s
                    authentication cookie with a <a href="https://en.wikipedia.org/wiki/Salt_(cryptography">salt</a>)
                    for added security.</p>
                    <p>The name of the headers can be specified using the xsrfHeaderName and xsrfCookieName
                    properties of either $httpProvider.defaults at config-time, $http.defaults at run-time,
                    or the per-request config object.</p>
                    
                        </div>
                    
                    
                            <div class="example">
                                <h4>Example:</h4>
                    
                                <div class="example-content">
                                    <example>
                    <file name="index.html">
                     <div ng-controller="FetchCtrl">
                       <select ng-model="method">
                         <option>GET</option>
                         <option>JSONP</option>
                       </select>
                       <input type="text" ng-model="url" size="80"/>
                       <button id="fetchbtn" ng-click="fetch()">fetch</button><br>
                       <button id="samplegetbtn" ng-click="updateModel('GET', 'http-hello.html')">Sample GET</button>
                       <button id="samplejsonpbtn"
                         ng-click="updateModel('JSONP',
                                       'https://angularjs.org/greet.php?callback=JSON_CALLBACK&name=Super%20Hero')">
                         Sample JSONP
                       </button>
                       <button id="invalidjsonpbtn"
                         ng-click="updateModel('JSONP', 'https://angularjs.org/doesntexist&callback=JSON_CALLBACK')">
                           Invalid JSONP
                         </button>
                       <pre>http status code: {{status}}</pre>
                       <pre>http response data: {{data}}</pre>
                     </div>
                    </file>
                    <file name="script.js">
                     function FetchCtrl($scope, $http, $templateCache) {
                       $scope.method = &#39;GET&#39;;
                       $scope.url = &#39;http-hello.html&#39;;
                    
                       $scope.fetch = function() {
                         $scope.code = null;
                         $scope.response = null;
                    
                         $http({method: $scope.method, url: $scope.url, cache: $templateCache}).
                           success(function(data, status) {
                             $scope.status = status;
                             $scope.data = data;
                           }).
                           error(function(data, status) {
                             $scope.data = data || &quot;Request failed&quot;;
                             $scope.status = status;
                         });
                       };
                    
                       $scope.updateModel = function(method, url) {
                         $scope.method = method;
                         $scope.url = url;
                       };
                     }
                    </file>
                    <file name="http-hello.html">
                     Hello, $http!
                    </file>
                    <file name="protractor.js" type="protractor">
                     var status = element(by.binding(&#39;status&#39;));
                     var data = element(by.binding(&#39;data&#39;));
                     var fetchBtn = element(by.id(&#39;fetchbtn&#39;));
                     var sampleGetBtn = element(by.id(&#39;samplegetbtn&#39;));
                     var sampleJsonpBtn = element(by.id(&#39;samplejsonpbtn&#39;));
                     var invalidJsonpBtn = element(by.id(&#39;invalidjsonpbtn&#39;));
                    
                     it(&#39;should make an xhr GET request&#39;, function() {
                       sampleGetBtn.click();
                       fetchBtn.click();
                       expect(status.getText()).toMatch(&#39;200&#39;);
                       expect(data.getText()).toMatch(/Hello, \$http!/);
                     });
                    
                     it(&#39;should make a JSONP request to angularjs.org&#39;, function() {
                       sampleJsonpBtn.click();
                       fetchBtn.click();
                       expect(status.getText()).toMatch(&#39;200&#39;);
                       expect(data.getText()).toMatch(/Super Hero!/);
                     });
                    
                     it(&#39;should make JSONP request to invalid URL and invoke the error handler&#39;,
                         function() {
                       invalidJsonpBtn.click();
                       fetchBtn.click();
                       expect(status.getText()).toMatch(&#39;0&#39;);
                       expect(data.getText()).toMatch(&#39;Request failed&#39;);
                     });
                    </file>
                    </example>
                                </div>
                            </div>
                    
                            <h4>Sub-properties:</h4>
                    
                            <ul class="params-list">
                                <li class="param">
                                        <code class="param-name">config</code>
                                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object" class="crosslink external" target="_blank">Object</a></span>
                    
                                    <div class="param-description">
                                        <p>Object describing the request to be made and how it should be
                       processed. The object has following properties:</p>
                    <ul>
                    <li><strong>method</strong> – <code>{string}</code> – HTTP method (e.g. &#39;GET&#39;, &#39;POST&#39;, etc)</li>
                    <li><strong>url</strong> – <code>{string}</code> – Absolute or relative URL of the resource that is being requested.</li>
                    <li><strong>params</strong> – <code>{Object.&lt;string|Object&gt;}</code> – Map of strings or objects which will be turned
                    to <code>?key1=value1&amp;key2=value2</code> after the url. If the value is not a string, it will be
                    JSONified.</li>
                    <li><strong>data</strong> – <code>{string|Object}</code> – Data to be sent as the request message data.</li>
                    <li><strong>headers</strong> – <code>{Object}</code> – Map of strings or functions which return strings representing
                    HTTP headers to send to the server. If the return value of a function is null, the
                    header will not be sent.</li>
                    <li><strong>xsrfHeaderName</strong> – <code>{string}</code> – Name of HTTP header to populate with the XSRF token.</li>
                    <li><strong>xsrfCookieName</strong> – <code>{string}</code> – Name of cookie containing the XSRF token.</li>
                    <li><strong>transformRequest</strong> –
                    <code>{function(data, headersGetter)|Array.&lt;function(data, headersGetter)&gt;}</code> –
                    transform function or an array of such functions. The transform function takes the http
                    request body and headers and returns its transformed (typically serialized) version.</li>
                    <li><strong>transformResponse</strong> –
                    <code>{function(data, headersGetter)|Array.&lt;function(data, headersGetter)&gt;}</code> –
                    transform function or an array of such functions. The transform function takes the http
                    response body and headers and returns its transformed (typically deserialized) version.</li>
                    <li><strong>cache</strong> – <code>{boolean|Cache}</code> – If true, a default $http cache will be used to cache the
                    GET request, otherwise if a cache instance built with
                    {@link ng.$cacheFactory $cacheFactory}, this cache will be used for
                    caching.</li>
                    <li><strong>timeout</strong> – <code>{number|Promise}</code> – timeout in milliseconds, or {@link ng.$q promise}
                    that should abort the request when resolved.</li>
                    <li><strong>withCredentials</strong> - <code>{boolean}</code> - whether to set the <code>withCredentials</code> flag on the
                    XHR object. See [requests with credentials]<a href="https://developer.mozilla.org/en/http_access_control#section_5">https://developer.mozilla.org/en/http_access_control#section_5</a>
                    for more information.</li>
                    <li><strong>responseType</strong> - <code>{string}</code> - see
                    <a href="https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType">requestType</a>.</li>
                    </ul>
                    
                                    </div>
                    
                                </li>
                            </ul>
                    </div>
                    <div id="property_{boolean} $invalid True if at least one error on the control." class="property item">
                        <h3 class="name"><code>{boolean} $invalid True if at least one error on the control.</code></h3>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String" class="crosslink external" target="_blank">String</a></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                        <p>Provided by the <a href="../modules/ng.html">ng</a> module.</p>
                                    <p>
                                    Defined in
                            <a href="../files/js_angular.js.html#l17295"><code>js\angular.js:17295</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p><code>NgModelController</code> provides API for the <code>ng-model</code> directive. The controller contains
                    services for data-binding, validation, CSS updates, and value formatting and parsing. It
                    purposefully does not contain any logic which deals with DOM rendering or listening to
                    DOM events. Such DOM related logic should be provided by other directives which make use of
                    <code>NgModelController</code> for data-binding.</p>
                    <h2 id="custom-control-example">Custom Control Example</h2>
                    <p>This example shows how to use <code>NgModelController</code> with a custom control to achieve
                    data-binding. Notice how different directives (<code>contenteditable</code>, <code>ng-model</code>, and <code>required</code>)
                    collaborate together to achieve the desired result.</p>
                    <p>Note that <code>contenteditable</code> is an HTML5 attribute, which tells the browser to let the element
                    contents be edited in place by the user.  This will not work on older browsers.</p>
                    <p>We are using the {@link ng.service:$sce $sce} service here and include the {@link ngSanitize $sanitize}
                    module to automatically remove &quot;bad&quot; content like inline event listener (e.g. <code>&lt;span onclick=&quot;...&quot;&gt;</code>).
                    However, as we are using <code>$sce</code> the model can still decide to to provide unsafe content if it marks
                    that content using the <code>$sce</code> service.</p>
                    <example name="NgModelController" module="customControl" deps="angular-sanitize.js">
                       <file name="style.css">
                         [contenteditable] {
                           border: 1px solid black;
                           background-color: white;
                           min-height: 20px;
                         }
                    
                         .ng-invalid {
                           border: 1px solid red;
                         }
                    
                       </file>
                       <file name="script.js">
                         angular.module(&#39;customControl&#39;, [&#39;ngSanitize&#39;]).
                           directive(&#39;contenteditable&#39;, [&#39;$sce&#39;, function($sce) {
                             return {
                               restrict: &#39;A&#39;, // only activate on element attribute
                               require: &#39;?ngModel&#39;, // get a hold of NgModelController
                               link: function(scope, element, attrs, ngModel) {
                                 if(!ngModel) return; // do nothing if no ng-model
                    
                                 // Specify how UI should be updated
                                 ngModel.$render = function() {
                                   element.html($sce.getTrustedHtml(ngModel.$viewValue || &#39;&#39;));
                                 };
                    
                                 // Listen for change events to enable binding
                                 element.on(&#39;blur keyup change&#39;, function() {
                                   scope.$apply(read);
                                 });
                                 read(); // initialize
                    
                                 // Write data to the model
                                 function read() {
                                   var html = element.html();
                                   // When we clear the content editable the browser leaves a <br> behind
                                   // If strip-br attribute is provided then we strip this out
                                   if( attrs.stripBr &amp;&amp; html == &#39;<br>&#39; ) {
                                     html = &#39;&#39;;
                                   }
                                   ngModel.$setViewValue(html);
                                 }
                               }
                             };
                           }]);
                       </file>
                       <file name="index.html">
                         <form name="myForm">
                          <div contenteditable
                               name="myWidget" ng-model="userContent"
                               strip-br="true"
                               required>Change me!</div>
                           <span ng-show="myForm.myWidget.$error.required">Required!</span>
                          <hr>
                          <textarea ng-model="userContent"></textarea>
                         </form>
                       </file>
                       <file name="protractor.js" type="protractor">
                       it(&#39;should data-bind and become invalid&#39;, function() {
                         if (browser.params.browser == &#39;safari&#39; || browser.params.browser == &#39;firefox&#39;) {
                           // SafariDriver can&#39;t handle contenteditable
                           // and Firefox driver can&#39;t clear contenteditables very well
                           return;
                         }
                         var contentEditable = element(by.css(&#39;[contenteditable]&#39;));
                         var content = &#39;Change me!&#39;;
                    
                         expect(contentEditable.getText()).toEqual(content);
                    
                         contentEditable.clear();
                         contentEditable.sendKeys(protractor.Key.BACK_SPACE);
                         expect(contentEditable.getText()).toEqual(&#39;&#39;);
                         expect(contentEditable.getAttribute(&#39;class&#39;)).toMatch(/ng-invalid-required/);
                       });
                       </file>
                    </example>
                        </div>
                    
                    
                    
                    </div>
                    <div id="property_{boolean} animations Does the browser support CSS animation events ?" class="property item">
                        <h3 class="name"><code>{boolean} animations Does the browser support CSS animation events ?</code></h3>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                        <p>Provided by the <a href="../modules/ng.html">ng</a> module.</p>
                                    <p>
                                    Defined in
                            <a href="../files/js_angular.js.html#l14066"><code>js\angular.js:14066</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p>This is very simple implementation of testing browser&#39;s features.</p>
                    
                        </div>
                    
                    
                    
                    </div>
                    <div id="property_{Object} $error Is an object hash, containing references to all invalid controls or
                     forms, where:
                    
                     - keys are validation tokens (error names),
                     - values are arrays of controls or forms that are invalid for given error name.
                    
                    
                     Built-in validation tokens:
                    
                     - &#x60;email&#x60;
                     - &#x60;max&#x60;
                     - &#x60;maxlength&#x60;
                     - &#x60;min&#x60;
                     - &#x60;minlength&#x60;
                     - &#x60;number&#x60;
                     - &#x60;pattern&#x60;
                     - &#x60;required&#x60;
                     - &#x60;url&#x60;" class="property item">
                        <h3 class="name"><code>{Object} $error Is an object hash, containing references to all invalid controls or
                     forms, where:
                    
                     - keys are validation tokens (error names),
                     - values are arrays of controls or forms that are invalid for given error name.
                    
                    
                     Built-in validation tokens:
                    
                     - &#x60;email&#x60;
                     - &#x60;max&#x60;
                     - &#x60;maxlength&#x60;
                     - &#x60;min&#x60;
                     - &#x60;minlength&#x60;
                     - &#x60;number&#x60;
                     - &#x60;pattern&#x60;
                     - &#x60;required&#x60;
                     - &#x60;url&#x60;</code></h3>
                        <span class="type"><a href="https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Boolean" class="crosslink external" target="_blank">Boolean</a></span>
                    
                    
                    
                    
                    
                        <div class="meta">
                                        <p>Provided by the <a href="../modules/ng.html">ng</a> module.</p>
                                    <p>
                                    Defined in
                            <a href="../files/js_angular.js.html#l15981"><code>js\angular.js:15981</code></a>
                            </p>
                    
                    
                        </div>
                    
                        <div class="description">
                            <p><code>FormController</code> keeps track of all its controls and nested forms as well as the state of them,
                    such as being valid/invalid or dirty/pristine.</p>
                    <p>Each {@link ng.directive:form form} directive creates an instance
                    of <code>FormController</code>.</p>
                    
                        </div>
                    
                    
                    
                    </div>
            </div>


    </div>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
