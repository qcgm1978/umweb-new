<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>room\script\chat_v1.source.js - umweb-remote</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="icon" href="../assets/favicon.ico">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
                <h1><img src="../assets/css/logo.png" title="umweb-remote" width="117" height="52"></h1>
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.0.0</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
                    <h2 class="off-left">APIs</h2>
                    <div id="api-tabview" class="tabview">
                        <ul class="tabs">
                            <li><a href="#api-classes">Classes</a></li>
                            <li><a href="#api-modules">Modules</a></li>
                        </ul>
                
                        <div id="api-tabview-filter">
                            <input type="search" id="api-filter" placeholder="Type to filter APIs">
                        </div>
                
                        <div id="api-tabview-panel">
                            <ul id="api-classes" class="apis classes">
                                <li><a href="../classes/chat.html">chat</a></li>
                                <li><a href="../classes/chat_panel.html">chat_panel</a></li>
                                <li><a href="../classes/g_UserList.html">g_UserList</a></li>
                                <li><a href="../classes/message_display.html">message_display</a></li>
                                <li><a href="../classes/persist.html">persist</a></li>
                                <li><a href="../classes/room.html">room</a></li>
                                <li><a href="../classes/SendGift.html">SendGift</a></li>
                                <li><a href="../classes/User.html">User</a></li>
                                <li><a href="../classes/xchat_swf.html">xchat_swf</a></li>
                                <li><a href="../classes/xMessager.html">xMessager</a></li>
                            </ul>
                
                            <ul id="api-modules" class="apis modules">
                                <li><a href="../modules/chat.html">chat</a></li>
                                <li><a href="../modules/room.html">room</a></li>
                                <li><a href="../modules/SendGift.html">SendGift</a></li>
                                <li><a href="../modules/xchat.html">xchat</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
                    Show:
                    <label for="api-show-inherited">
                        <input type="checkbox" id="api-show-inherited" checked>
                        Inherited
                    </label>
            
                    <label for="api-show-protected">
                        <input type="checkbox" id="api-show-protected">
                        Protected
                    </label>
            
                    <label for="api-show-private">
                        <input type="checkbox" id="api-show-private">
                        Private
                    </label>
                    <label for="api-show-deprecated">
                        <input type="checkbox" id="api-show-deprecated">
                        Deprecated
                    </label>
            
                </div>
            
            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
<h1 class="file-heading">File: room\script\chat_v1.source.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Description: èŠå¤©å¯¹è±¡
 *
 * @module chat
 * @class chat
 * @constructor
 */
/* èŠå¤©å¯¹è±¡ */
function chat(o, type, $scroll) {
    this.chat_type = type;
    this.infosum = 0;        // ä¿¡æ¯è®¡æ•°å™¨
    this.lastmsg = [];       // ä¿å­˜æœ€åå‡ æ¡èŠå¤©ä¿¡æ¯
    this.autoscroll = true;     // é»˜è®¤è‡ªåŠ¨æ»šå±
    this.isautoclear = 1;    // é»˜è®¤è‡ªåŠ¨æ¸…å±
    this.bgifs = 1;          // ç¤¼ç‰©æ»šå±è®¡æ•°å™¨
    this.gtime = 0;          // ç‰©æ»šå±è®¡æ—¶å™¨
    this.rspeed = 1;        // ç¤¼ç‰©æ»šå±é€Ÿåº¦
    this.colors = new Array(&quot;FF0000&quot;, &quot;800080&quot;, &quot;000080&quot;, &quot;800000&quot;, &quot;008080&quot;, &quot;FF8C00&quot;);// ç¤¼ç‰©é¢œè‰²åº“
    this.icolor = &#x27;#ff0000&#x27;;// ç¤¼ç‰©é»˜è®¤é¢œè‰²
    // å…è´¹çŒ®èŠ±åº“
    // å†›è¡”
    this.titles = {
        1: &#x27;&#x27;,
        2: &#x27;&#x27;,
        3: &#x27;&#x27;,
        4: &#x27;&#x27;,
        5: &#x27;&#x27;,
        6: &#x27;&#x27;,
        7: &#x27;&#x27;,
        8: &#x27;&#x27;,
        9: &#x27;&#x27;,
        10: &#x27;&#x27;,
        11: &#x27;&#x27;,
        12: &#x27;&#x27;,
        13: &#x27;&#x27;,
        14: &#x27;&#x27;,
        15: &#x27;&#x27;,
        16: &#x27;&#x27;,
        17: &#x27;&#x27;,
        18: &#x27;&#x27;,
        19: &#x27;&#x27;,
        20: &#x27;&#x27;,
        21: &#x27;&#x27;,
        22: &#x27;&#x27;
    };
    // çˆµä½
    this.vips = {1: &#x27;è´µå®¾&#x27;, 2: &#x27;ç»…å£«&#x27;, 3: &#x27;éª‘å£«&#x27;, 4: &#x27;é¢†ä¸»&#x27;, 5: &#x27;å‹‹çˆµ&#x27;, 28: &#x27;å…ƒå‹‹&#x27;, 29: &#x27;å…ƒå¸…&#x27;, 30: &#x27;å…ƒé¦–&#x27;};
    this.$ = document.getElementById(o);
    /**
     * scrolling elements of chatting box
     *
     * @attribute $scrollEle
     * @required
     * @type Object
     */
    this.$scrollEle = $scroll
    this.kw_filter = null;
    var Freeflowers = new Array(
        &#x27;&lt;font style=&quot;font-size:8pt&quot;  color=green&gt;&lt;b&gt;&lt;i&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#33cc33&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font- size: 14pt&quot; color=#66ff33&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot;  color=#99ff66&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot;  color=#ccff66&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#ffff66&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 8pt&quot; color=#ffcc66&gt;æ£’æ£’&lt;/font&gt;&lt;font  style=&quot;font-size: 11pt&quot; color=#ff9900&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font- size: 14pt&quot; color=#ff3300&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot;  color=#ff7c80&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot;  color=#ff6699&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#ff66cc&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 8pt&quot; color=#ff33cc&gt;æ£’æ£’&lt;/font&gt;&lt;font  style=&quot;font-size: 11pt&quot; color=#cc0099&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font- size: 14pt&quot; color=#990099&gt;æ£’æ£’&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot;  color=purple&gt;æ£’æ£’&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=fuchsia&gt;&lt;b&gt;âˆµé¼“æŒï½â˜†â˜…âˆ´**â˜†âˆµ*â˜†â˜…âˆ´[m:101]â˜†((å•ª))((å•ª))((å•ª))[m:102]ï½ï½ï½ï½å¥½å¬[m:103]&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=green&gt;&lt;b&gt;&lt;i&gt;â–„&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#33cc33&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#66ff33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot;  color=#ccff33&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=yellow&gt;â–ˆ&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#ff9900&gt;çŒ®èŠ±&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff3300&gt;â–ˆ&lt;/font&gt;&lt;font style=&quot;font-size:  11pt&quot; color=#ff7c80&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot;  color=#ff3399&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size: 11pt&quot; color=#cc0099&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#9933ff&gt;â–„&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#6600ff&gt;â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:  11pt&quot; color=#3333cc&gt;å¥½å¬å¥½å¬ï½ï½&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#a50021&gt;â˜†â˜…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#ff5050&gt;âˆ´â˜†âˆµ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ffcccc&gt;â˜†â˜…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#66ffcc&gt;âˆ´â˜†â˜…âˆ´&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#6600ff&gt;â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#9933ff&gt;â–„&lt;/i&gt;&lt;/font&gt;&lt;font style=&quot;font -size: 11pt&quot; color=#cc0099&gt;&lt;i&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; face= å®‹ä½“ color=#ff3399&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#ff7c80&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff3300&gt;â–ˆ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff9900&gt;çŒ®èŠ±&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=yellow&gt;â–ˆ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ccff33&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#66ff33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#33cc33&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=green&gt;â–„&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#33cccc&gt;ï½~å”±çš„å¤ªæ£’äº†[m:103]~ï½â˜†â˜…/**â˜†ï½~æˆ‘å¬å¾—éƒ½é†‰äº†ï½â˜†[m:101]â˜…ï½~ç»™æˆ‘ç­¾ä¸ªåå§~ ï½â˜†â˜…[m:103]â˜†ï½~å“‡~ï½ï¼ï½~å¤ªå¥½å¬äº†~ï½&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;&lt;i&gt;â–ˆ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff9933&gt;å¥½å¬[m:103]â– &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=yellow&gt;ä½ &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ffcc66&gt;â– &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ffcc99&gt;æ˜¯&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff99cc&gt;â– &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#cc99ff&gt;æ˜&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#cc0099&gt;â– &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#9900cc&gt;æ˜Ÿ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#9933ff&gt;â– &lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#3366ff&gt;å¥½å¬&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=blue&gt;â–„â–…â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff9900&gt;çŒ®èŠ±&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#339966&gt;â–†â–…â–„â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#cc00ff&gt;å¥½å¬&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff33cc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;å¤ªç¾äº†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ffcc66&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;çŒ®èŠ±&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=aqua&gt;â–ƒâ–„â–…â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#993366&gt;å¥½å¬&lt;/i&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#669900&gt;&lt;b&gt;&lt;i&gt;çœŸå¥½å¬ï¼[m:100]â–â–‚â–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–[m:100]å•ªå•ªå•ª[m:100]â–â–‚â–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–[m:100]å¤ªæ£’äº†ï¼[m:100]â–â–‚â–ƒâ–„â–…â–†â–‡[m:100]æˆ‘é†‰äº†ï¼&lt;/b&gt;&lt;/i&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;&lt;b&gt;å¥½ï¼å¥½ï¼&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#ff9900&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=fuchsia&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#ff99cc&gt;ä¸ºä½ æ¥å–å½©ï¼ï¼[m:104]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=ime&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#33cccc&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#339966&gt;æŒå£°å“èµ·æ¥&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#99cc00&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=olive&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=green&gt;è°¢è°¢ä½ çš„å£°éŸ³&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#33cccc&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=aqua&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#00ccff&gt;å•ªå•ªå•ªå•ªå•ª&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#3366ff&gt;oooooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=blue&gt;ä¸ºä½ æ¥å–å½©[m:111]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#666699&gt;ooo&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=navy&gt;ooo&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#ff9900&gt;âˆµ*â˜†â˜…âˆ´â˜†âˆµçŒ®èŠ±[m:100]ï½â˜†â˜…âˆ´â˜†âˆµ*â˜†[m:112]â˜…âˆ´â˜†âˆµå¥½å¬[m:103]ï½â˜†â˜…âˆ´â˜†âˆµ*â˜†â˜…âˆ´â˜†âˆµé¼“æŒï½â˜†â˜…âˆ´â˜†âˆµ[m:111]&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:8pt&quot;  color=#993300&gt;â—&lt;/font&gt;&lt;font style=&quot;font- size: 11pt&quot; color=#ff6600&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; face= å®‹ä½“ color=#ff9900&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot;  color=#ffcc00&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 22pt&quot; color=#ffcc00&gt;â—[m:101]&lt;/font&gt;&lt;font style=&quot;font-size: 8pt&quot; color=#993300&gt;â—&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#ff6600&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#ff9900&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot; color=#ffcc00&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:22pt&quot; color=#ffcc00&gt;â—[m:101]&lt;/font&gt;&lt;font style=&quot;font-size:8pt&quot; color=#993300&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ff6600&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#ff9900&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:18pt&quot;  color=#ffcc00&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 22pt&quot; color=#ffcc00&gt;â—[m:101]&lt;/font&gt;&lt;font style=&quot;font-size: 9pt&quot; color=#bb0000&gt;â—&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#d50000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#f00000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:18pt&quot; color=#ff0c0c&gt;â—[m:112]&lt;/font&gt;&lt;font style=&quot;font-size:9pt&quot; color=#bb0000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#d50000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#f00000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size: 18pt&quot;  color=#ff0c0c&gt;â—[m:112]&lt;/font&gt;&lt;font style=&quot;font-size: 9pt&quot; color=#bb0000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#d50000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#f00000&gt;â—&lt;/font&gt;&lt;font style=&quot;font-size:18pt&quot; color=#ff0c0c&gt;â—[m:112]&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=blue&gt;å“—å•¦å•¦---[m:105]&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#00ccff&gt;ä¸‹é›¨å•¦&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#ff6600&gt;ï½€ã€ï½€ã€ï½€ã€ï½€ã€&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=red&gt;å¥½å¬&lt;/font&gt;&lt;font style=&quot;font- size: 11pt&quot; color=#cc0099&gt;ï½€ç»™ä½ é›¨ä¼ã€[m:106]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=lime&gt;è¿·æ­»äººäº†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=#ff6600&gt;ï½€ã€ï½€ã€ï½€ã€&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;é²œèŠ±[m:100]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=blue&gt;ï½€ã€ï½€ã€ï½€ã€&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=lime&gt;å¤ªç¾äº†&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#ff33cc&gt;&lt;b&gt;&lt;i&gt;çœŸå¥½å¬ï¼â–â–‚â–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–[m:103]å•ªå•ªå•ª[m:111]â–â–‚â–ƒâ–„â–…â–†â–‡â–‡â–†â–…â–„â–ƒâ–‚â–[m:102]å¤ªæ£’äº†ï¼[m:111]â–‡â–†â–…â–„â–ƒâ–‚â–æˆ‘é†‰äº†ï¼&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#ff9900&gt;&lt;b&gt;å”±çš„çœŸæ£’[m:111]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=purple&gt;é¼“æŒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=red&gt;â•°â˜†â˜†ç«ç‘°â•°â˜†â˜†â•®[m:100]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=yellow&gt;â•°â˜†â˜†ç‰¡ä¸¹â•°â˜†â˜†â•®[m:108]&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=lime&gt;â•°â˜†â˜†èŒ‰è‰â•°â˜†â˜†â•®&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#cc0099&gt;è¿˜æœ‰ä¸€æå‹¿å¿˜æˆ‘&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:14pt&quot; color=#9900cc&gt;&lt;b&gt;&lt;i&gt;âˆ´Â°â˜…**â˜…Â°âˆ´&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=#ccffcc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font  style=&quot;font-size: 14pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot;  color=#33cc33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=green&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=fuchsia&gt;çœŸå¥½å¬&lt;/font&gt;&lt;font  style=&quot;font-size: 14pt&quot; color=red&gt;â–‡&lt;/font&gt;&lt;font style=&quot;font-size:  14pt&quot; color=#ff9900&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot;  color=yellow&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=#99cc00&gt;â–„&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=#00ccff&gt;â–ƒ&lt;/font&gt;&lt;font  style=&quot;font-size: 14pt&quot; color=#00faf4&gt;â–‚&lt;/font&gt;&lt;font style=&quot;font-size:14pt&quot; color=#ccecff&gt;â–&lt;/font&gt;&lt;font style=&quot;font-size: 14pt&quot; color=#ff9900&gt;å•ªå•ªå•ª&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=blue&gt;&lt;i&gt;å•ªå•ªå•ªâˆµ*â˜†â˜…**âˆ´â˜†å•ªå•ªå•ªâˆµ*â˜†â˜…âˆ´â˜†âˆµå•ªå•ªå•ªå•ªâˆµ[m:101]*â˜†â˜…âˆ´â˜†å•ªå•ªå•ªâˆµ*â˜†â˜…[m:103]âˆ´â˜†âˆµå•ªå•ªå•ªâˆµ*â˜†â˜…âˆ´â˜†&lt;/i&gt;&lt;/font&gt;&#x27;,
        &#x27;[m:111]&lt;font style=&quot;font-size:11pt&quot; color=#ccffcc&gt;&lt;b&gt;&lt;i&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=green&gt;å¥½&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ccffcc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:  11pt&quot; color=#33cc33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=green&gt;å¬&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ccffcc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#33cc33&gt;â–†&lt;/font&gt;[m:101]&lt;font style=&quot;font-size:11pt&quot; color=#ccffcc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:  11pt&quot; color=#33cc33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=green&gt;å¥½&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#ccffcc&gt;â–â–‚â–ƒ&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot; color=#99ff99&gt;â–„&lt;/font&gt;&lt;font  style=&quot;font-size:11pt&quot; color=#66ff66&gt;â–…&lt;/font&gt;&lt;font style=&quot;font-size:  11pt&quot; color=#33cc33&gt;â–†&lt;/font&gt;&lt;font style=&quot;font-size:11pt&quot;  color=green&gt;å¬&lt;/font&gt;&lt;/i&gt;&lt;/b&gt;&lt;/font&gt;&#x27;,
        &#x27;&lt;font style=&quot;font-size:11pt&quot; color=#ff9900&gt;&lt;b&gt;è‰ºæœ¯å®¶ï¼[m:104]ä¸“ä¸šæ­Œæ˜Ÿ[m:103]~~~~ã·â•°å“—...â˜†â•®æ»¡å¤©æ˜Ÿ[m:102]ã·é¼“æŒã·ã·â•°ç­¾åï¼ç­¾åï¼å¯å¦å¤–åŠ å”‡å°?[m:107]&lt;/b&gt;&lt;/font&gt;&#x27;
    );
    this.flowers = Freeflowers;
    //åˆå§‹åŒ–èŠå¤©æ¡†
    this.init();
}
var ImageBase = &#x27;&#x27;;
chat.prototype = {
    // åˆå§‹åŒ–èŠå¤©æ¡†é«˜åº¦
    init: function () {
        //this.$.style.height = (document.body.clientHeight-10) + &#x27;px&#x27;;
        //this.rolling();
    },
    // æ—¶é—´
    time: function () {
        var date = new Date();
        var now = (date.getHours() &lt; 10 ? (&#x27;0&#x27; + date.getHours()) : date.getHours()) + &#x27;:&#x27;
            + (date.getMinutes() &lt; 10 ? (&#x27;0&#x27; + date.getMinutes()) : date.getMinutes());
        return now;
    },
	/**
	 * Description: åœ¨èŠå¤©æ¡†ä¸­æ’å…¥å†…å®¹
	 *
	 * @method insert
	 * @param {String} info info to insert
     * @example
     *  &quot;è¿æ¥æœåŠ¡å™¨æˆåŠŸ.&quot;
	 */
	insert:function(info)
	{
        this.storelastmsg(info);
        this.autoclear();
        this.$.innerHTML += &#x27;&lt;li&gt;&lt;span class=&quot;lcTime&quot;&gt;&#x27; + this.time() + &#x27;&lt;/span&gt;&#x27; + info + &#x27;&lt;/li&gt;&#x27;;
        this.infosum++;
        this.rolling();
    },
    // ä¿å­˜æœ€å5æ¡èŠå¤©è®°å½•
    storelastmsg: function (info) {
        if (this.lastmsg.length &gt;= 0 &amp;&amp; this.lastmsg.length &lt; 5) {
            this.lastmsg.push(info);
        } else if (this.lastmsg.length &gt;= 5) {
            this.lastmsg.shift();
            this.lastmsg.push(info);
        }
    },
    // è¿˜åŸæœ€å5æ¡èŠå¤©è®°å½•
    restorelastmsg: function () {
        if (this.lastmsg.length &gt; 0) {
            for (var i = 0; i &lt; this.lastmsg.length; i++) {
                this.$.innerHTML += &#x27;&lt;li&gt;&lt;div class=&quot;message_block&quot;&gt;&#x27; + this.time() + &#x27;&amp;nbsp;&amp;nbsp;&#x27; + this.lastmsg.shift() + &#x27;&lt;/div&gt;&lt;/li&gt;&#x27;;
            }
        }
        this.rolling();
    },
    // ç”¨æˆ·æ¸…å±
    userclear: function () {
        this.$.innerHTML = &#x27;&#x27;;
        this.infosum = 0;
    },
    // è‡ªåŠ¨æ¸…å±
    autoclear: function () {
        if ((this.infosum &gt; 50 || this.$.scrollHeight &gt; document.body.clientHeight * 5) &amp;&amp; this.isautoclear == 1) {
            this.userclear();
            this.restorelastmsg();
        }
    },
    // æ»šå±
    rolling: function () {
        if (this.autoscroll) {
            this.$scrollEle[0].scrollTop = this.$scrollEle[0].scrollHeight - 5;
        }
    },
    // å°ç¤¼ç‰©
    sgift: function (text, img, sum, unit) {
        var sgimg = &#x27;&#x27;;
        var showsum = sum &gt; 50 ? 50 : sum;
        for (var i = showsum; i &gt; 0; i--) {
            sgimg += img;
        }
        if (showsum &gt; 18) {
            this.insert(text + &#x27;&amp;nbsp;&#x27; + sgimg + &#x27;&amp;nbsp;å…±&#x27; + sum + unit);
        } else {
            this.insert(text + &#x27;&amp;nbsp;&#x27; + sgimg);
        }
        sgimg = showsum = null;
        this.rolling();
    },
    // å¤§ç¤¼ç‰©
    bgift: function (text, img, sum, unit) {
        var self = this;
        this.icolor = this.colors[Math.floor(Math.random() * this.colors.length)];
        if (this.bgifs &gt; sum) {
            window.clearTimeout(this.gtime);
            this.bgifs = 1;
            return;
        }
        this.insert(&#x27;&lt;span style=&quot;color:&#x27; + this.icolor + &#x27;&quot;&gt;&#x27; + text + &#x27;&amp;nbsp;&#x27; + img + &#x27;ç¬¬&#x27; + this.bgifs + unit + &#x27;&lt;/span&gt;&#x27;);
        this.bgifs++;
        this.gtime = window.setTimeout(function () {
            self.bgift(text, img, sum, unit);
        }, self.rspeed);
    },
    // æ˜¾ç¤ºç¤¼ç‰©
    disgift: function (gift, win) {
        var self = this;
        /*
         if(win == 1) // å…¬èŠåŒº
         {
         var showimg = &#x27;&lt;img src=&#x27;+ gift.img +&#x27; /&gt;&#x27;;
         if(gift.type==&#x27;S&#x27;){	 // æ‰¹é‡æ˜¾ç¤º
         this.sgift(gift.text, showimg, gift.sum, gift.unit);
         }
         else if(gift.type==&#x27;B&#x27;){ // åˆ·å±æ˜¾ç¤º
         this.bgift(gift.text, showimg, gift.sum, gift.unit);
         }
         }else{// ç§èŠåŒº
         var showimg = &#x27;&lt;img src=&quot;&#x27;+ gift.img +&#x27;&quot; height=&quot;20&quot;/&gt;&#x27;;
         this.insert(gift.text + &#x27;&amp;nbsp;&#x27; + showimg);
         }
         */
        var showimg = &#x27;&#x27;;
        var count = gift.sum &gt; 10 ? 10 : gift.sum;
        if (gift.type == &#x27;S&#x27;) {
            for (var i = 0; i &lt; count; i++) {
                showimg += &#x27;&lt;span class=&quot;gift&quot;&gt;&lt;img src=&quot;&#x27; + gift.img + &#x27;&quot; height=&quot;20&quot;/&gt;&lt;/span&gt;&#x27;;
            }
        }
        else if (gift.type == &#x27;B&#x27;) {
            for (var i = 0; i &lt; count; i++) {
                showimg += &#x27;&lt;span class=&quot;gift&quot;&gt;&lt;img src=&quot;&#x27; + gift.img + &#x27;&quot; height=&quot;40&quot;/&gt;&lt;/span&gt;&#x27;;
            }
        }
        var text = &#x27;&lt;div class=&quot;lcWord&quot;&gt;&#x27;;
        if (gift.tou) {
            var tou = gift.tou.appdata;
            var toadminimg = tou.tolevelinroom == 900 &amp;&amp; !tou.towatchman ? &#x27;&lt;i class=&quot;manageIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var towatchmanimg = tou.watchman ? &#x27;&lt;i class=&quot;xunIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tosimg = tou.roomer ? &#x27;&lt;i class=&quot;zhuboIco zb&#x27; + tou.starlevel + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tovimg = tou.vip2 ? &#x27;&lt;i class=&quot;vipIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var totimg = tou.vip &amp;&amp; !tou.roomer ? &#x27;&lt;i class=&quot;jwIco V&#x27; + tou.vip + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tofimg = Base64.decode(tou.family_name) != &quot;0&quot; ? &#x27;&lt;i class=&quot;clubIcoText&quot;&gt;&lt;em&gt;&#x27; + Base64.decode(tou.family_name) + &#x27;&lt;/em&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var togid = (tou.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;(&lt;u&gt;&#x27; + tou.nicegid + &#x27;&lt;/u&gt;)&lt;i class=&quot;lhIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;(&#x27; + tou.nicegid + &#x27;)&#x27;;
            if (!tou.vip &amp;&amp; !tou.roomer &amp;&amp; !tou.watchman &amp;&amp; (tou.nicegid + &quot;&quot;).length &lt;= 8) {
                totimg = &#x27;&lt;i class=&quot;lmIco&quot;&gt;&lt;/i&gt;&#x27;;
            }
        } else {
            var toadminimg = &#x27;&#x27;;
            var towatchmanimg = &#x27;&#x27;;
            var tosimg = &#x27;&#x27;;
            var tovimg = &#x27;&#x27;;
            var totimg = &#x27;&#x27;;
            var tofimg = &#x27;&#x27;;
            var togid = &#x27;&#x27;;
            var lhimg = &#x27;&#x27;;
        }
        var fromu = gift.fromu.appdata;
        var watchmanimg = fromu.watchman ? &#x27;&lt;i class=&quot;xunIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var adminimg = fromu.levelinroom == 900 &amp;&amp; !fromu.watchman ? &#x27;&lt;i class=&quot;manageIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var simg = fromu.roomer ? &#x27;&lt;i class=&quot;zhuboIco zb&#x27; + fromu.starlevel + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var vimg = fromu.vip2 ? &#x27;&lt;i class=&quot;vipIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var timg = fromu.vip &amp;&amp; !fromu.roomer ? &#x27;&lt;i class=&quot;jwIco V&#x27; + fromu.vip + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var fimg = Base64.decode(fromu.family_name) != &quot;0&quot; ? &#x27;&lt;i class=&quot;clubIcoText&quot;&gt;&lt;em&gt;&#x27; + Base64.decode(fromu.family_name) + &#x27;&lt;/em&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        if (!fromu.vip &amp;&amp; !fromu.roomer &amp;&amp; !fromu.watchman &amp;&amp; (fromu.nicegid + &quot;&quot;).length &lt;= 8) {
            timg = &#x27;&lt;i class=&quot;lmIco&quot;&gt;&lt;/i&gt;&#x27;;
        }
        var fgid = (fromu.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;(&lt;u&gt;&#x27; + fromu.nicegid + &#x27;&lt;/u&gt;)&lt;i class=&quot;lhIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;(&#x27; + fromu.nicegid + &#x27;)&#x27;;
        //text = &#x27;&lt;font class=red&gt;[ç¤¼ç‰©]&lt;/font&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27;+this.chat_type+&#x27;,&#x27;+gift.from_uid+&#x27;)&quot;&gt;&lt;span class=&quot;username&quot;&gt;&#x27; + gift.from_nickname + &#x27;&lt;/span&gt;&lt;/a&gt; å‘ &lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27;+this.chat_type+&#x27;,&#x27;+gift.to_uid+&#x27;)&quot;&gt;&lt;span class=&quot;username&quot;&gt;&#x27; + gift.to_nickname + &#x27;&lt;/span&gt;&lt;/a&gt; é€ï¼š&#x27; + gift.sum + gift.unit + gift.gift_name;
        text += simg + timg + vimg + fimg + watchmanimg + adminimg + &#x27;&lt;span class=&quot;blue&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + gift.from_uid + &#x27;)&quot;&gt;&#x27; + gift.from_nickname + fgid + &#x27;&lt;/a&gt;&lt;/span&gt; é€ç»™ &#x27; + tosimg + totimg + tovimg + tofimg + towatchmanimg + toadminimg + &#x27;&lt;span class=&quot;yellow&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + gift.to_uid + &#x27;)&quot;&gt;&#x27; + gift.to_nickname + togid + &#x27;&lt;/a&gt;&lt;/span&gt; é€ï¼š&lt;span class=&quot;pink&quot;&gt;&#x27; + gift.sum + gift.unit + gift.gift_name + &#x27;&lt;/span&gt;&#x27;;
        this.insert(text + &#x27;&amp;nbsp;&#x27; + showimg + &#x27;&lt;/div&gt;&#x27;);
        window.setTimeout(function () {
            self.rolling();
        }, 1000);
    },
    // éšæœºæ˜¾ç¤ºèŠ±
    randflower: function () {
        var fl = this.flowers[Math.floor(Math.random() * this.flowers.length)];
        fl = fl.replace(/\[m:(\d{3})\]/g, &quot;&lt;img src=&#x27;&quot; + ImageBase + &quot;/room/images/fl/$1.gif&#x27;&gt;&quot;);
        return fl;
    },
    // å…è´¹çŒ®èŠ±
    disflower: function (user) {
        var fl = this.randflower();
        var e_id = user.fromwho.gid + &quot;_&quot; + makeid();
        var e_id_1 = user.sendwho.gid + &quot;_&quot; + makeid();
        this.insert(&#x27;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + user.fromwho.gid + &#x27;)&quot;&gt;&lt;span class=&quot;username&quot;&gt;&#x27; + user.fromwho.nickname + &#x27;&lt;/span&gt;&lt;/a&gt;&amp;nbsp;å¯¹&amp;nbsp;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + user.sendwho.gid + &#x27;)&quot;&gt;&lt;span class=&quot;username&quot;&gt;&#x27; + user.sendwho.nickname + &#x27;&lt;/span&gt;&lt;/a&gt;&amp;nbsp;è¯´ï¼š&#x27; + fl);
        //install_user_click(e_id,this.chat_type,user.fromwho.gid);
        //install_user_click(e_id_1,this.chat_type,user.sendwho.gid);
    },
    // äººå‘˜è¿›å‡ºæˆ¿é—´
    disinout: function (info) {
        var type = (info.type == 1) ? &#x27;è¿›å…¥æˆ¿é—´&lt;/div&gt;&#x27; : &#x27;ç¦»å¼€æˆ¿é—´&lt;/div&gt;&#x27;;
        var prefix = (info.type == 1) ? &#x27;&lt;div class=&quot;lcWord&quot;&gt;æ¬¢è¿ &#x27; : &#x27;&lt;div class=&quot;lcWord&quot;&gt;æ¬¢é€ &#x27;;//;
        if ((info.nicegid + &quot;&quot;).length &gt; 8 &amp;&amp; info.type == 1) {
            this.insert(prefix + &#x27;&lt;span class=&quot;green&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + info.gid + &#x27;)&quot;&gt;&#x27; + info.nickname + &#x27;&lt;/a&gt;&lt;/span&gt;&amp;nbsp;&#x27; + type);
            return;
        }
        var carmsg = &#x27;&#x27;;
        if (parseInt(info.car_id) &gt; 0) {
            carmsg = info.carmsg;
            type = &#x27;&lt;/div&gt;&#x27;;
        }
        var timg = info.vip &amp;&amp; !info.roomer ? &#x27;&lt;i class=&quot;jwIco V&#x27; + info.vip + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        if (!info.vip &amp;&amp; !info.roomer &amp;&amp; !info.watchman &amp;&amp; (info.nicegid + &quot;&quot;).length &lt;= 8) {
            timg = &#x27;&lt;i class=&quot;lmIco&quot;&gt;&lt;/i&gt;&#x27;;
        }
        var vimg = info.vip2 ? &#x27;&lt;i class=&quot;vipIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var adminimg = info.levelinroom == 900 ? &#x27;&lt;i class=&quot;manageIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var watchmanimg = info.watchman ? &#x27;&lt;i class=&quot;xunIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var simg = info.roomer ? &#x27;&lt;i class=&quot;zhuboIco zb&#x27; + info.starlevel + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var e_id = info.gid + &quot;_&quot; + makeid();
        var nicegid = (info.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;(&lt;u&gt;&#x27; + info.nicegid + &#x27;&lt;/u&gt;)&#x27; : &#x27;(&#x27; + info.nicegid + &#x27;)&#x27;;
        var lhimg = (info.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;&lt;i class=&quot;lhIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var fimg = Base64.decode(info.family_name) != &quot;0&quot; ? &#x27;&lt;i class=&quot;clubIcoText&quot;&gt;&lt;em&gt;&#x27; + Base64.decode(info.family_name) + &#x27;&lt;/em&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        if (info.type == 1) { //åªæ˜¾ç¤ºè¿›å…¥æˆ¿é—´ä¿¡æ¯
            if (info.title || info.vip || info.roomer || info.levelinroom == 900 || info.vip2) {
                this.insert(prefix + simg + timg + vimg + adminimg + watchmanimg + fimg + &#x27;&lt;span class=&quot;purple&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + info.gid + &#x27;)&quot;&gt;&#x27; + info.nickname + nicegid + &#x27;&lt;/a&gt;&lt;/span&gt;&#x27; + lhimg + carmsg + type);
            } else {
                this.insert(prefix + timg + adminimg + watchmanimg + fimg + &#x27;&lt;span class=&quot;purple&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + info.gid + &#x27;)&quot;&gt;&#x27; + info.nickname + nicegid + &#x27;&lt;/a&gt;&lt;/span&gt;&#x27; + lhimg + carmsg + type);
            }
        }
    },
    display_chatmessage: function (chatdata) {
        if (this.kw_filter) {
            chatdata.message = chatdata.message.replace(this.kw_filter, &#x27;***&#x27;);
        }
        //alert(chatdata.message);
        //&#x27;/&#x27; html escaped. &amp;#47;
        chatdata.message = chatdata.message.replace(/&amp;#47;b(\d+)/g, &quot;&lt;img src=&#x27;&quot; + ImageBase + &quot;/room/images/emotion/$1.gif&#x27;&gt;&quot;);
        var t = &#x27;&lt;div class=&quot;lcWord&quot;&gt;&#x27;;
        if (chatdata.touid) {
            var tou = chatdata.tou.appdata;
            var toadminimg = tou.tolevelinroom == 900 &amp;&amp; !tou.towatchman ? &#x27;&lt;i class=&quot;manageIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var towatchmanimg = tou.watchman ? &#x27;&lt;i class=&quot;xunIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tosimg = tou.roomer ? &#x27;&lt;i class=&quot;zhuboIco zb&#x27; + tou.starlevel + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tovimg = tou.vip2 ? &#x27;&lt;i class=&quot;vipIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var totimg = tou.vip &amp;&amp; !tou.roomer ? &#x27;&lt;i class=&quot;jwIco V&#x27; + tou.vip + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var tofimg = Base64.decode(tou.family_name) != &quot;0&quot; ? &#x27;&lt;i class=&quot;clubIcoText&quot;&gt;&lt;em&gt;&#x27; + Base64.decode(tou.family_name) + &#x27;&lt;/em&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
            var togid = (tou.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;(&lt;u&gt;&#x27; + tou.nicegid + &#x27;&lt;/u&gt;)&lt;i class=&quot;lhIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;(&#x27; + tou.nicegid + &#x27;)&#x27;;
            if (!tou.vip &amp;&amp; !tou.roomer &amp;&amp; !tou.watchman &amp;&amp; (tou.nicegid + &quot;&quot;).length &lt;= 8) {
                totimg = &#x27;&lt;i class=&quot;lmIco&quot;&gt;&lt;/i&gt;&#x27;;
            }
        }
        var fromu = chatdata.fromu.appdata;
        var watchmanimg = fromu.watchman ? &#x27;&lt;i class=&quot;xunIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var adminimg = fromu.levelinroom == 900 &amp;&amp; !fromu.watchman ? &#x27;&lt;i class=&quot;manageIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var simg = fromu.roomer ? &#x27;&lt;i class=&quot;zhuboIco zb&#x27; + fromu.starlevel + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var vimg = fromu.vip2 ? &#x27;&lt;i class=&quot;vipIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var timg = fromu.vip &amp;&amp; !fromu.roomer ? &#x27;&lt;i class=&quot;jwIco V&#x27; + fromu.vip + &#x27;&quot;&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var fimg = Base64.decode(fromu.family_name) != &quot;0&quot; ? &#x27;&lt;i class=&quot;clubIcoText&quot;&gt;&lt;em&gt;&#x27; + Base64.decode(fromu.family_name) + &#x27;&lt;/em&gt;&lt;/i&gt;&#x27; : &#x27;&#x27;;
        var fgid = (fromu.nicegid + &quot;&quot;).length &lt; 8 ? &#x27;(&lt;u&gt;&#x27; + fromu.nicegid + &#x27;&lt;/u&gt;)&lt;i class=&quot;lhIco&quot;&gt;&lt;/i&gt;&#x27; : &#x27;(&#x27; + fromu.nicegid + &#x27;)&#x27;;
        if (!fromu.vip &amp;&amp; !fromu.roomer &amp;&amp; !fromu.watchman &amp;&amp; (fromu.nicegid + &quot;&quot;).length &lt;= 8) {
            timg = &#x27;&lt;i class=&quot;lmIco&quot;&gt;&lt;/i&gt;&#x27;;
        }
        var my_css = &quot;cyan&quot;;
        var to_css = &quot;cyan&quot;;
        var msg_css = &quot;white&quot;;
        if (chatdata.is_my) {
            my_css = &quot;yellow&quot;;
        } else {
            if (chatdata.fromu.appdata.roomer) {
                my_css = &quot;pink&quot;;
                if (chatdata.is_my_to &amp;&amp; chatdata.secret) {
                    msg_css = &quot;orange&quot;;
                }
            }
        }
        if (chatdata.is_my_to) {
            to_css = &quot;yellow&quot;;
        } else {
            if (chatdata.touid &amp;&amp; chatdata.tou.appdata.roomer) {
                to_css = &quot;pink&quot;;
            }
        }
        if (!chatdata.is_my &amp;&amp; !chatdata.is_my_to) {
            to_css = &quot;yellow&quot;;
        }
        if (chatdata.touid == 0) {
            t += simg + timg + vimg + fimg + watchmanimg + adminimg + &#x27;&lt;span class=&quot;greenLight&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + chatdata.uid + &#x27;)&quot;&gt;&#x27; + chatdata.nickname + fgid + &#x27;&lt;/a&gt;&lt;/span&gt; è¯´:&lt;span class=&quot;&#x27; + msg_css + &#x27;&quot;&gt;&#x27; + chatdata.message + &#x27;&lt;/span&gt;&#x27;;
            this.insert(t);
        }
        else {
            if (chatdata.secret) {
                t += simg + timg + vimg + fimg + watchmanimg + adminimg + &#x27;&lt;span class=&quot;&#x27; + my_css + &#x27;&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + chatdata.uid + &#x27;)&quot;&gt;&#x27; + chatdata.nickname + fgid + &#x27;&lt;/a&gt;&lt;/span&gt; å¯¹&#x27; + tosimg + totimg + tovimg + tofimg + towatchmanimg + toadminimg + &#x27;&lt;span class=&quot;&#x27; + to_css + &#x27;&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + chatdata.touid + &#x27;)&quot;&gt;&#x27; + chatdata.to_nickname + togid + &#x27;&lt;/a&gt;&lt;/span&gt;[æ‚„æ‚„çš„]è¯´:&lt;span class=&quot;&#x27; + msg_css + &#x27;&quot;&gt;&#x27; + chatdata.message + &#x27;&lt;/span&gt;&#x27;;
            }
            else {
                t += simg + timg + vimg + fimg + watchmanimg + adminimg + &#x27;&lt;span class=&quot;&#x27; + my_css + &#x27;&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + chatdata.uid + &#x27;)&quot;&gt;&#x27; + chatdata.nickname + fgid + &#x27;&lt;/a&gt;&lt;/span&gt; å¯¹ &#x27; + tosimg + totimg + tovimg + tofimg + towatchmanimg + toadminimg + &#x27;&lt;span class=&quot;&#x27; + to_css + &#x27;&quot;&gt;&lt;a href=&quot;javascript:void(0)&quot; onClick=&quot;select_it(&#x27; + this.chat_type + &#x27;,&#x27; + chatdata.touid + &#x27;)&quot;&gt;&#x27; + chatdata.to_nickname + togid + &#x27;&lt;/a&gt;&lt;/span&gt;è¯´:&lt;span class=&quot;&#x27; + msg_css + &#x27;&quot;&gt;&#x27; + chatdata.message + &#x27;&lt;/span&gt;&#x27;;
            }
            t += &#x27;&lt;/div&gt;&#x27;;
            this.insert(t);
        }
    }
};
function makeid() {
    var text = &quot;&quot;;
    var possible = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;;
    for (var i = 0; i &lt; 15; i++)
        text += possible.charAt(Math.floor(Math.random() * possible.length));
    return text;
}
function select_it(type, param) {
    var e = event || window.event;
    var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
    var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
    var x = e.pageX || e.clientX + scrollX;
    var y = e.pageY || e.clientY + scrollY;
    if (param) {
        chat_zone_display_user_memu(type, x, y, param);
    }
    param = &quot;&quot;;
}
    </pre>
</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
